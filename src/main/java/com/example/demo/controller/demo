package com.example.demo.service.impl;

import com.example.demo.entity.PenaltyAction;
import com.example.demo.repository.PenaltyActionRepository;
import com.example.demo.service.PenaltyActionService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class PenaltyActionServiceImpl implements PenaltyActionService {

    @Autowired
    private PenaltyActionRepository repository;

    @Override
    public List<PenaltyAction> getAllActions() {
        return repository.findAll();
    }

    @Override
    public PenaltyAction saveAction(PenaltyAction action) {
        return repository.save(action);
    }
}                  0000000000   package com.example.demo.repository;

import com.example.demo.entity.AppUser;
import org.springframework.data.jpa.repository.JpaRepository;
import java.util.Optional;

public interface AppUserRepository extends JpaRepository<AppUser, Long> {
    Optional<AppUser> findByEmail(String email); // add this
}
 private String email;

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}              000000000000    @Override
public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException {
    AppUser user = userRepo.findByEmail(email)
            .orElseThrow(() -> new UsernameNotFoundException("User not found"));
    return new org.springframework.security.core.userdetails.User(
            user.getEmail(),
            user.getPassword(),
            new ArrayList<>()
    );
}
 package com.example.demo.dto;

public class AuthRequest {
    private String email; // add this
    private String password;

    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }

    public String getPassword() { return password; }
    public void setPassword(String password) { this.password = password; }
}                 00000000000      @Override
public AuthResponse login(AuthRequest request) {
    AppUser user = appUserRepository.findByEmail(request.getEmail())
            .orElseThrow(() -> new RuntimeException("User not found"));

    if (!passwordEncoder.matches(request.getPassword(), user.getPassword())) {
        throw new RuntimeException("Invalid password");
    }

    String token = jwtTokenProvider.generateToken(user.getEmail());
    return new AuthResponse(token);
}
 