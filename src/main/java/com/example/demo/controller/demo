package com.example.demo.service;

import java.util.List;
import com.example.demo.entity.StudentProfile;

public interface StudentProfileService {

    StudentProfile createStudent(StudentProfile student);

    StudentProfile getStudentById(Long id);

    List<StudentProfile> getAllStudents();

    StudentProfile updateRepeatStatus(Long studentId, boolean status);

    StudentProfile findByStudentIdentifier(String identifier);
}         000000000package com.example.demo.service.impl;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.example.demo.entity.StudentProfile;
import com.example.demo.repository.StudentProfileRepository;
import com.example.demo.service.StudentProfileService;

@Service
public class StudentProfileServiceImpl implements StudentProfileService {

    @Autowired
    private StudentProfileRepository repo;

    @Override
    public StudentProfile createStudent(StudentProfile student) {
        return repo.save(student);
    }

    @Override
    public StudentProfile getStudentById(Long id) {
        return repo.findById(id).orElse(null);
    }

    @Override
    public List<StudentProfile> getAllStudents() {
        return repo.findAll();
    }

    @Override
    public StudentProfile updateRepeatStatus(Long studentId, boolean status) {
        StudentProfile student = repo.findById(studentId).orElse(null);
        if (student != null) {
            student.setRepeatOffender(status);
            return repo.save(student);
        }
        return null;
    }

    @Override
    public StudentProfile findByStudentIdentifier(String identifier) {
        return repo.findByStudentIdentifier(identifier);
    }
}
 package com.example.demo.service;

import java.util.List;
import com.example.demo.entity.IntegrityCase;

public interface IntegrityCaseService {

    IntegrityCase createCase(IntegrityCase integrityCase);

    IntegrityCase updateCaseStatus(Long id, String status);

    List<IntegrityCase> getCasesByStudent(Long studentId);

    IntegrityCase getCaseById(Long id);

    List<IntegrityCase> getAllCases();
}                                                                                                                                                                     package com.example.demo.service.impl;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.example.demo.entity.IntegrityCase;
import com.example.demo.entity.StudentProfile;
import com.example.demo.repository.IntegrityCaseRepository;
import com.example.demo.repository.StudentProfileRepository;
import com.example.demo.service.IntegrityCaseService;

@Service
public class IntegrityCaseServiceImpl implements IntegrityCaseService {

    @Autowired
    private IntegrityCaseRepository caseRepo;

    @Autowired
    private StudentProfileRepository studentRepo;

    @Override
    public IntegrityCase createCase(IntegrityCase integrityCase) {
        return caseRepo.save(integrityCase);
    }

    @Override
    public IntegrityCase updateCaseStatus(Long id, String status) {
        IntegrityCase ic = caseRepo.findById(id).orElse(null);
        if (ic != null) {
            ic.setStatus(status);
            return caseRepo.save(ic);
        }
        return null;
    }

    @Override
    public List<IntegrityCase> getCasesByStudent(Long studentId) {
        StudentProfile sp = studentRepo.findById(studentId).orElse(null);
        return sp != null ? caseRepo.findByStudentProfile(sp) : null;
    }

    @Override
    public IntegrityCase getCaseById(Long id) {
        return caseRepo.findById(id).orElse(null);
    }

    @Override
    public List<IntegrityCase> getAllCases() {
        return caseRepo.findAll();
    }
}
package com.example.demo.service;

import java.util.List;
import com.example.demo.entity.EvidenceRecord;

public interface EvidenceRecordService {

    EvidenceRecord submitEvidence(EvidenceRecord evidence);

    List<EvidenceRecord> getEvidenceByCase(Long caseId);

    EvidenceRecord getEvidenceById(Long id);

    List<EvidenceRecord> getAllEvidence();
}
 package com.example.demo.service.impl;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.example.demo.entity.EvidenceRecord;
import com.example.demo.entity.IntegrityCase;
import com.example.demo.repository.EvidenceRecordRepository;
import com.example.demo.repository.IntegrityCaseRepository;
import com.example.demo.service.EvidenceRecordService;

@Service
public class EvidenceRecordServiceImpl implements EvidenceRecordService {

    @Autowired
    private EvidenceRecordRepository evidenceRepo;

    @Autowired
    private IntegrityCaseRepository caseRepo;

    @Override
    public EvidenceRecord submitEvidence(EvidenceRecord evidence) {
        return evidenceRepo.save(evidence);
    }

    @Override
    public List<EvidenceRecord> getEvidenceByCase(Long caseId) {
        IntegrityCase ic = caseRepo.findById(caseId).orElse(null);
        return ic != null ? evidenceRepo.findByIntegrityCase(ic) : null;
    }

    @Override
    public EvidenceRecord getEvidenceById(Long id) {
        return evidenceRepo.findById(id).orElse(null);
    }

    @Override
    public List<EvidenceRecord> getAllEvidence() {
        return evidenceRepo.findAll();
    }
}                                                                                                                                                                                     package com.example.demo.service;

import java.util.List;
import com.example.demo.entity.PenaltyAction;

public interface PenaltyActionService {

    PenaltyAction addPenalty(PenaltyAction penalty);

    List<PenaltyAction> getPenaltiesByCase(Long caseId);

    PenaltyAction getPenaltyById(Long id);

    List<PenaltyAction> getAllPenalties();
}
 package com.example.demo.service.impl;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.example.demo.entity.PenaltyAction;
import com.example.demo.entity.IntegrityCase;
import com.example.demo.repository.PenaltyActionRepository;
import com.example.demo.repository.IntegrityCaseRepository;
import com.example.demo.service.PenaltyActionService;

@Service
public class PenaltyActionServiceImpl implements PenaltyActionService {

    @Autowired
    private PenaltyActionRepository penaltyRepo;

    @Autowired
    private IntegrityCaseRepository caseRepo;

    @Override
    public PenaltyAction addPenalty(PenaltyAction penalty) {
        return penaltyRepo.save(penalty);
    }

    @Override
    public List<PenaltyAction> getPenaltiesByCase(Long caseId) {
        IntegrityCase ic = caseRepo.findById(caseId).orElse(null);
        return ic != null ? penaltyRepo.findByIntegrityCase(ic) : null;
    }

    @Override
    public PenaltyAction getPenaltyById(Long id) {
        return penaltyRepo.findById(id).orElse(null);
    }

    @Override
    public List<PenaltyAction> getAllPenalties() {
        return penaltyRepo.findAll();
    }
}                                                                                                                                                                                  package com.example.demo.service;

import java.util.List;
import com.example.demo.entity.RepeatOffenderRecord;

public interface RepeatOffenderRecordService {

    RepeatOffenderRecord refreshRepeatOffenderData(Long studentId);

    RepeatOffenderRecord getRecordByStudent(Long studentId);

    List<RepeatOffenderRecord> getAllRepeatOffenders();
}
 package com.example.demo.service.impl;

import java.time.LocalDate;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.example.demo.entity.RepeatOffenderRecord;
import com.example.demo.entity.StudentProfile;
import com.example.demo.repository.RepeatOffenderRecordRepository;
import com.example.demo.repository.StudentProfileRepository;
import com.example.demo.service.RepeatOffenderRecordService;

import java.util.List;

@Service
public class RepeatOffenderRecordServiceImpl implements RepeatOffenderRecordService {

    @Autowired
    private RepeatOffenderRecordRepository recordRepo;

    @Autowired
    private StudentProfileRepository studentRepo;

    @Override
    public RepeatOffenderRecord refreshRepeatOffenderData(Long studentId) {
        StudentProfile sp = studentRepo.findById(studentId).orElse(null);
        if (sp == null) return null;

        RepeatOffenderRecord record = new RepeatOffenderRecord();
        record.setStudentProfile(sp);
        record.setTotalCases(1);
        record.setLastIncidentDate(LocalDate.now());
        record.setFlagSeverity("LOW");

        return recordRepo.save(record);
    }

    @Override
    public RepeatOffenderRecord getRecordByStudent(Long studentId) {
        StudentProfile sp = studentRepo.findById(studentId).orElse(null);
        return sp != null ? recordRepo.findByStudentProfile(sp) : null;
    }

    @Override
    public List<RepeatOffenderRecord> getAllRepeatOffenders() {
        return recordRepo.findAll();
    }
}  0000000000000 package com.example.demo.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import com.example.demo.entity.StudentProfile;
import com.example.demo.service.StudentProfileService;

@RestController
@RequestMapping("/api/students")
public class StudentProfileController {

    @Autowired
    private StudentProfileService service;

    @PostMapping
    public StudentProfile createStudent(@RequestBody StudentProfile student) {
        return service.createStudent(student);
    }

    @GetMapping("/{id}")
    public StudentProfile getStudentById(@PathVariable Long id) {
        return service.getStudentById(id);
    }

    @GetMapping
    public List<StudentProfile> getAllStudents() {
        return service.getAllStudents();
    }

    @PutMapping("/{studentId}/repeat-status")
    public StudentProfile updateRepeatStatus(
            @PathVariable Long studentId,
            @RequestParam boolean status) {
        return service.updateRepeatStatus(studentId, status);
    }

    @GetMapping("/lookup/{identifier}")
    public StudentProfile findByIdentifier(@PathVariable String identifier) {
        return service.findByStudentIdentifier(identifier);
    }
} 00000000000000package com.example.demo.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import com.example.demo.entity.IntegrityCase;
import com.example.demo.service.IntegrityCaseService;

@RestController
@RequestMapping("/api/cases")
public class IntegrityCaseController {

    @Autowired
    private IntegrityCaseService service;

    @PostMapping
    public IntegrityCase createCase(@RequestBody IntegrityCase integrityCase) {
        return service.createCase(integrityCase);
    }

    @PutMapping("/{id}/status")
    public IntegrityCase updateCaseStatus(
            @PathVariable Long id,
            @RequestParam String status) {
        return service.updateCaseStatus(id, status);
    }

    @GetMapping("/student/{studentId}")
    public List<IntegrityCase> getCasesByStudent(@PathVariable Long studentId) {
        return service.getCasesByStudent(studentId);
    }

    @GetMapping("/{id}")
    public IntegrityCase getCaseById(@PathVariable Long id) {
        return service.getCaseById(id);
    }

    @GetMapping
    public List<IntegrityCase> getAllCases() {
        return service.getAllCases();
    }
}
 package com.example.demo.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import com.example.demo.entity.EvidenceRecord;
import com.example.demo.service.EvidenceRecordService;

@RestController
@RequestMapping("/api/evidence")
public class EvidenceRecordController {

    @Autowired
    private EvidenceRecordService service;

    @PostMapping
    public EvidenceRecord submitEvidence(@RequestBody EvidenceRecord evidence) {
        return service.submitEvidence(evidence);
    }

    @GetMapping("/case/{caseId}")
    public List<EvidenceRecord> getEvidenceByCase(@PathVariable Long caseId) {
        return service.getEvidenceByCase(caseId);
    }

    @GetMapping("/{id}")
    public EvidenceRecord getEvidenceById(@PathVariable Long id) {
        return service.getEvidenceById(id);
    }

    @GetMapping
    public List<EvidenceRecord> getAllEvidence() {
        return service.getAllEvidence();
    }
} 00000000000          package com.example.demo.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import com.example.demo.entity.PenaltyAction;
import com.example.demo.service.PenaltyActionService;

@RestController
@RequestMapping("/api/penalties")
public class PenaltyActionController {

    @Autowired
    private PenaltyActionService service;

    @PostMapping
    public PenaltyAction addPenalty(@RequestBody PenaltyAction penalty) {
        return service.addPenalty(penalty);
    }

    @GetMapping("/case/{caseId}")
    public List<PenaltyAction> getPenaltiesByCase(@PathVariable Long caseId) {
        return service.getPenaltiesByCase(caseId);
    }

    @GetMapping("/{id}")
    public PenaltyAction getPenaltyById(@PathVariable Long id) {
        return service.getPenaltyById(id);
    }

    @GetMapping
    public List<PenaltyAction> getAllPenalties() {
        return service.getAllPenalties();
    }
}
package com.example.demo.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import com.example.demo.entity.RepeatOffenderRecord;
import com.example.demo.service.RepeatOffenderRecordService;

@RestController
@RequestMapping("/api/repeat-offenders")
public class RepeatOffenderRecordController {

    @Autowired
    private RepeatOffenderRecordService service;

    @PostMapping("/refresh/{studentId}")
    public RepeatOffenderRecord refreshRecord(@PathVariable Long studentId) {
        return service.refreshRepeatOffenderData(studentId);
    }

    @GetMapping("/student/{studentId}")
    public RepeatOffenderRecord getRecordByStudent(@PathVariable Long studentId) {
        return service.getRecordByStudent(studentId);
    }

    @GetMapping
    public List<RepeatOffenderRecord> getAllRepeatOffenders() {
        return service.getAllRepeatOffenders();
    }
}                                                                                                                                                                               package com.example.demo.entity;

import java.time.LocalDateTime;
import java.util.List;

import jakarta.persistence.*;

@Entity
@Table(name = "student_profile")
public class StudentProfile {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(unique = true, nullable = false)
    private String studentId;

    private String name;

    @Column(unique = true)
    private String email;

    private String program;

    private Integer yearLevel;

    private Boolean isRepeatOffender;

    private LocalDateTime createdAt;

    @OneToMany(mappedBy = "studentProfile")
    private List<IntegrityCase> integrityCases;

    @PrePersist
    public void onCreate() {
        this.createdAt = LocalDateTime.now();
        this.isRepeatOffender = false;
    }

    // Getters and Setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public String getStudentId() { return studentId; }
    public void setStudentId(String studentId) { this.studentId = studentId; }

    public String getName() { return name; }
    public void setName(String name) { this.name = name; }

    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }

    public String getProgram() { return program; }
    public void setProgram(String program) { this.program = program; }

    public Integer getYearLevel() { return yearLevel; }
    public void setYearLevel(Integer yearLevel) { this.yearLevel = yearLevel; }

    public Boolean getIsRepeatOffender() { return isRepeatOffender; }
    public void setIsRepeatOffender(Boolean isRepeatOffender) { this.isRepeatOffender = isRepeatOffender; }

    public LocalDateTime getCreatedAt() { return createdAt; }
}
 package com.example.demo.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import com.example.demo.entity.StudentProfile;

public interface StudentProfileRepository extends JpaRepository<StudentProfile, Long> {

    StudentProfile findByStudentId(String studentId);
} 000000000000        package com.example.demo.entity;

import java.time.LocalDate;
import java.time.LocalDateTime;

import jakarta.persistence.*;

@Entity
@Table(name = "integrity_case")
public class IntegrityCase {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne
    @JoinColumn(name = "student_id")
    private StudentProfile studentProfile;

    private String courseCode;
    private String instructorName;
    private String description;
    private String status;
    private LocalDate incidentDate;
    private LocalDateTime createdAt;

    @PrePersist
    public void prePersist() {
        this.createdAt = LocalDateTime.now();
        this.status = "OPEN";
    }

    // Getters and Setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public StudentProfile getStudentProfile() { return studentProfile; }
    public void setStudentProfile(StudentProfile studentProfile) { this.studentProfile = studentProfile; }

    public String getCourseCode() { return courseCode; }
    public void setCourseCode(String courseCode) { this.courseCode = courseCode; }

    public String getInstructorName() { return instructorName; }
    public void setInstructorName(String instructorName) { this.instructorName = instructorName; }

    public String getDescription() { return description; }
    public void setDescription(String description) { this.description = description; }

    public String getStatus() { return status; }
    public void setStatus(String status) { this.status = status; }

    public LocalDate getIncidentDate() { return incidentDate; }
    public void setIncidentDate(LocalDate incidentDate) { this.incidentDate = incidentDate; }

    public LocalDateTime getCreatedAt() { return createdAt; }
}
 package com.example.demo.repository;

import java.time.LocalDate;
import java.util.List;

import org.springframework.data.jpa.repository.JpaRepository;
import com.example.demo.entity.IntegrityCase;
import com.example.demo.entity.StudentProfile;

public interface IntegrityCaseRepository extends JpaRepository<IntegrityCase, Long> {

    List<IntegrityCase> findByStudentProfile(StudentProfile studentProfile);

    List<IntegrityCase> findByStatusAndIncidentDateAfter(String status, LocalDate date);

    List<IntegrityCase> findByIncidentDateBetween(LocalDate start, LocalDate end);
}  0000000000000      package com.example.demo.entity;

import java.time.LocalDateTime;

import jakarta.persistence.*;

@Entity
@Table(name = "evidence_record")
public class EvidenceRecord {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne
    @JoinColumn(name = "case_id")
    private IntegrityCase integrityCase;

    private String evidenceType;
    private String content;
    private String submittedBy;
    private LocalDateTime submittedAt;

    @PrePersist
    public void prePersist() {
        this.submittedAt = LocalDateTime.now();
    }

    // Getters and Setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public IntegrityCase getIntegrityCase() { return integrityCase; }
    public void setIntegrityCase(IntegrityCase integrityCase) { this.integrityCase = integrityCase; }

    public String getEvidenceType() { return evidenceType; }
    public void setEvidenceType(String evidenceType) { this.evidenceType = evidenceType; }

    public String getContent() { return content; }
    public void setContent(String content) { this.content = content; }

    public String getSubmittedBy() { return submittedBy; }
    public void setSubmittedBy(String submittedBy) { this.submittedBy = submittedBy; }

    public LocalDateTime getSubmittedAt() { return submittedAt; }
}
 package com.example.demo.repository;

import java.util.List;

import org.springframework.data.jpa.repository.JpaRepository;
import com.example.demo.entity.EvidenceRecord;
import com.example.demo.entity.IntegrityCase;

public interface EvidenceRecordRepository extends JpaRepository<EvidenceRecord, Long> {

    List<EvidenceRecord> findByIntegrityCase(IntegrityCase integrityCase);
}      00000000         package com.example.demo.entity;

import java.time.LocalDateTime;

import jakarta.persistence.*;

@Entity
@Table(name = "penalty_action")
public class PenaltyAction {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne
    @JoinColumn(name = "case_id")
    private IntegrityCase integrityCase;

    private String penaltyType;
    private String details;
    private String issuedBy;
    private LocalDateTime issuedAt;

    @PrePersist
    public void prePersist() {
        this.issuedAt = LocalDateTime.now();
    }

    // Getters and Setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public IntegrityCase getIntegrityCase() { return integrityCase; }
    public void setIntegrityCase(IntegrityCase integrityCase) { this.integrityCase = integrityCase; }

    public String getPenaltyType() { return penaltyType; }
    public void setPenaltyType(String penaltyType) { this.penaltyType = penaltyType; }

    public String getDetails() { return details; }
    public void setDetails(String details) { this.details = details; }

    public String getIssuedBy() { return issuedBy; }
    public void setIssuedBy(String issuedBy) { this.issuedBy = issuedBy; }

    public LocalDateTime getIssuedAt() { return issuedAt; }
}
 package com.example.demo.repository;

import java.util.List;

import org.springframework.data.jpa.repository.JpaRepository;
import com.example.demo.entity.PenaltyAction;
import com.example.demo.entity.IntegrityCase;

public interface PenaltyActionRepository extends JpaRepository<PenaltyAction, Long> {

    List<PenaltyAction> findByIntegrityCase(IntegrityCase integrityCase);
}                                                                                                                                                                          package com.example.demo.entity;

import java.time.LocalDate;

import jakarta.persistence.*;

@Entity
@Table(name = "repeat_offender_record")
public class RepeatOffenderRecord {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne
    @JoinColumn(name = "student_id")
    private StudentProfile studentProfile;

    private Integer totalCases;
    private LocalDate lastIncidentDate;
    private String flagSeverity;

    // Getters and Setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public StudentProfile getStudentProfile() { return studentProfile; }
    public void setStudentProfile(StudentProfile studentProfile) { this.studentProfile = studentProfile; }

    public Integer getTotalCases() { return totalCases; }
    public void setTotalCases(Integer totalCases) { this.totalCases = totalCases; }

    public LocalDate getLastIncidentDate() { return lastIncidentDate; }
    public void setLastIncidentDate(LocalDate lastIncidentDate) { this.lastIncidentDate = lastIncidentDate; }

    public String getFlagSeverity() { return flagSeverity; }
    public void setFlagSeverity(String flagSeverity) { this.flagSeverity = flagSeverity; }
}
 package com.example.demo.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import com.example.demo.entity.RepeatOffenderRecord;
import com.example.demo.entity.StudentProfile;

public interface RepeatOffenderRecordRepository extends JpaRepository<RepeatOffenderRecord, Long> {

    RepeatOffenderRecord findByStudentProfile(StudentProfile studentProfile);
}
